var CircleStar,Singleton,StarField,__hasProp={}.hasOwnProperty,__extends=function(l,a){function c(){this.constructor=l}for(var b in a)__hasProp.call(a,b)&&(l[b]=a[b]);c.prototype=a.prototype;l.prototype=new c;l.__super__=a.prototype;return l};Singleton=function(){function l(){}l._instance=null;l.getInstance=function(){return this._instance||(this._instance=function(a,c,b){b.prototype=a.prototype;b=new b;a=a.apply(b,c);return Object(a)===a?a:b}(this,arguments,function(){}))};return l}();
StarField=function(l){function a(c,b,d,h,f,g,e){var k,a,m,n,l,p,q,r;this.stars=[];this.type=c;this.speed=d;this.direction=h;this.color=f;this.starCount=g;this.layers=e;this.layered=!1;if(1>d)throw Error("Speed must be at least 1");if("undefined"===typeof h||"UP"!==h&&"DOWN"!==h&&"LEFT"!==h&&"RIGHT"!==h)throw Error("Specify a direction from ['UP', 'DOWN', 'LEFT', 'RIGHT']");if("CIRCLE"!==c)throw console.log("enter one of these as first argument: ['CIRCLE']"),Error("didn't enter a valid type of star from ['CIRCLE']");
if("undefined"!==typeof e)for(this.layered=!0,n=Math.floor(g/e),l=!1,a=q=c=1;1<=e?q<=e:q>=e;a=1<=e?++q:--q)if(1===e)for(this.layered=!1,m=1;1<=n?m<=n:m>=n;1<=n?++m:--m)a=Math.floor(Math.random()*window.canvas.width+1),p=Math.floor(Math.random()*window.canvas.height+1),this.stars.push(new CircleStar(b,a,p,d,h,f,this.stars));else{this.layered=!0;m={layerArray:[],first:!1};m.small=l;m.ratio=c;if(1===a)for(m.first=!0,k=1;1<=n?k<=n:k>=n;1<=n?++k:--k)a=Math.floor(Math.random()*window.canvas.width+1),p=
Math.floor(Math.random()*window.canvas.height+1),m.layerArray.push(new CircleStar(b,a,p,d,h,f,m.layerArray));else if(a===e)if(a=this.stars.reduce(function(b,c){return b+c}),a+n<g)for(k=g-a,r=1;1<=k?r<=k:r>=k;1<=k?++r:--r)a=Math.floor(Math.random()*window.canvas.width+1),p=Math.floor(Math.random()*window.canvas.height+1),l?m.layerArray.push(new CircleStar(b/c,a,p,d/c,h,f,m.layerArray)):m.layerArray.push(new CircleStar(b*c,a,p,d*c,h,f,m.layerArray));else for(k=1;1<=n?k<=n:k>=n;1<=n?++k:--k)a=Math.floor(Math.random()*
window.canvas.width+1),p=Math.floor(Math.random()*window.canvas.height+1),l?m.layerArray.push(new CircleStar(b/c,a,p,d/c,h,f,m.layerArray)):m.layerArray.push(new CircleStar(b*c,a,p,d*c,h,f,m.layerArray));else for(k=1;1<=n?k<=n:k>=n;1<=n?++k:--k)a=Math.floor(Math.random()*window.canvas.width+1),p=Math.floor(Math.random()*window.canvas.height+1),l?m.layerArray.push(new CircleStar(b/c,a,p,d/c,h,f,m.layerArray)):m.layerArray.push(new CircleStar(b*c,a,p,d*c,h,f,m.layerArray));l?l=!1:(l=!0,c*=2);this.stars.push(m)}else for(a=
e=1;1<=g?e<=g:e>=g;a=1<=g?++e:--e)a=Math.floor(Math.random()*window.canvas.width+1),p=Math.floor(Math.random()*window.canvas.height+1),this.stars.push(new CircleStar(b,a,p,d,h,f,this.stars))}__extends(a,l);a.prototype.draw=function(){var c,b,d,h,a,g,e;if(0<this.stars.length)if(!0===this.layered)for(g=this.stars,b=0,h=g.length;b<h;b++)for(c=g[b],e=c.layerArray,d=0,a=e.length;d<a;d++)c=e[d],c.draw();else for(g=this.stars,b=0,h=g.length;b<h;b++)c=g[b],c.draw()};a.prototype.moveStars=function(){var c,
b,d,h,a,g,e;if(0<this.stars.length)if(!0===this.layered)for(g=this.stars,b=0,h=g.length;b<h;b++)for(c=g[b],e=c.layerArray,d=0,a=e.length;d<a;d++)c=e[d],c.move();else for(g=this.stars,b=0,h=g.length;b<h;b++)c=g[b],c.move()};a.prototype.setDirection=function(c){var b,d,a,f,g,e,k;this.direction=c;if(0<this.stars.length)if(!0===this.layered)for(e=this.stars,d=0,f=e.length;d<f;d++)for(b=e[d],k=b.layerArray,a=0,g=k.length;a<g;a++)b=k[a],b.direction=c;else for(e=this.stars,d=0,f=e.length;d<f;d++)b=e[d],
b.direction=c};a.prototype.freeze=function(){var c,b,d,a,f,g,e;if(0<this.stars.length)if(!0===this.layered)for(g=this.stars,b=0,a=g.length;b<a;b++)for(c=g[b],e=c.layerArray,d=0,f=e.length;d<f;d++)c=e[d],c.speed=0;else for(g=this.stars,b=0,a=g.length;b<a;b++)c=g[b],c.speed=0};a.prototype.resume=function(){this.setSpeed(this.speed);this.setDirection(this.direction)};a.prototype.setSpeed=function(c){var b,d,a,f,g,e,k;if(0<this.stars.length)if(!0===this.layered)for(b=c,8<c?b=8:1>c&&(b=1),d=c=1,e=this.layers;1<=
e?c<=e:c>=e;d=1<=e?++c:--c)if(1===d)for(g=this.stars[d-1].layerArray,d=0,f=g.length;d<f;d++)a=g[d],a.speed=b;else if(this.stars[d-1].small)for(k=this.stars[d-1].layerArray,f=0,g=k.length;f<g;f++)a=k[f],a.speed=b/this.stars[d-1].ratio;else for(k=this.stars[d-1].layerArray,f=0,g=k.length;f<g;f++)a=k[f],a.speed=b*this.stars[d-1].ratio;else for(d=this.stars,e=0,b=d.length;e<b;e++)a=d[e],a.speed=8<c?this.speed=8:1>c?this.speed=1:this.speed=c};a.prototype.changeSpeed=function(c){var b,a,h,f,g,e,k;if(0<
this.stars.length)if(!0===this.layered)for(b=h=1,e=this.layers;1<=e?h<=e:h>=e;b=1<=e?++h:--h)if(1===b)for(this.speed=1>=this.speed+c?1:8<=this.speed+c?8:this.speed+c,g=this.stars[0].layerArray,b=0,f=g.length;b<f;b++)a=g[b],a.speed=this.speed;else if(this.stars[b-1].small)for(k=this.stars[b-1].layerArray,f=0,g=k.length;f<g;f++)a=k[f],a.speed=1>=this.speed?1/this.stars[b-1].ratio:8<=this.speed?8/this.stars[b-1].ratio:a.speed+c/this.stars[b-1].ratio;else for(k=this.stars[b-1].layerArray,f=0,g=k.length;f<
g;f++)a=k[f],a.speed=1>=this.speed?1*this.stars[b-1].ratio:8<=this.speed?8*this.stars[b-1].ratio:a.speed+c*this.stars[b-1].ratio;else for(b=this.stars,e=0,h=b.length;e<h;e++)a=b[e],a.speed+=c,this.speed+=c,1>a.speed?a.speed=this.speed=1:8<a.speed&&(a.speed=this.speed=8)};a.prototype.setColor=function(a){var b,d,h,f,g,e,k;this.color=a;if(0<this.stars.length)if(this.layered)for(e=this.stars,d=0,f=e.length;d<f;d++)for(b=e[d],k=b.layerArray,h=0,g=k.length;h<g;h++)b=k[h],b.color=a;else for(e=this.stars,
d=0,f=e.length;d<f;d++)b=e[d],b.color=a};a.prototype.setBg=function(a){window.canvas.style.backgroundColor=a};a.prototype.clear=function(){var a,b,d,h,f;if(this.layered)for(a=b=a,f=this.layers;a<=f?b<=f:b>=f;a=a<=f?++b:--b)for(h=this.stars,d=0,h=h.length;d<h;d++);else this.stars=[]};return a}(Singleton);
CircleStar=function(){function l(a,c,b,d,h,f,g){this.radius=a;this.centerX=c;this.centerY=b;this.speed=d;this.direction=h;this.color=f;this.destroyed=!1;this.parentArray=g}l.prototype.draw=function(){window.ctx.fillStyle=this.color;window.ctx.strokeStyle=this.color;window.ctx.beginPath();window.ctx.arc(this.centerX,this.centerY,this.radius,0,2*Math.PI,!1);window.ctx.fill();window.ctx.stroke();if(this.destroyed)return this.destroy()};l.prototype.move=function(){"LEFT"===this.direction?this.centerX-=
this.speed:"RIGHT"===this.direction?this.centerX+=this.speed:"UP"===this.direction?this.centerY-=this.speed:"DOWN"===this.direction&&(this.centerY+=this.speed);if(0>this.centerX||this.centerX>window.canvas.width||0>this.centerY||this.centerY>window.canvas.height)return this.destroyed=!0};l.prototype.destroy=function(){var a,c;c=a=0;"LEFT"===this.direction?(a=window.canvas.width,c=Math.floor(Math.random()*window.canvas.height+1)):"RIGHT"===this.direction?c=Math.floor(Math.random()*window.canvas.height+
1):"UP"===this.direction?(a=Math.floor(Math.random()*window.canvas.width+1),c=window.canvas.height):"DOWN"===this.direction&&(a=Math.floor(Math.random()*window.canvas.width+1));this.parentArray.push(new l(this.radius,a,c,this.speed,this.direction,this.color,this.parentArray));a=this.parentArray.indexOf(this);return this.parentArray.splice(a,1)};return l}();
