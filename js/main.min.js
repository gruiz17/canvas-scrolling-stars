(function(){var t,p,v,w,u,x,y={}.hasOwnProperty,z=function(a,b){function d(){this.constructor=a}for(var c in b)y.call(b,c)&&(a[c]=b[c]);d.prototype=b.prototype;a.prototype=new d;a.__super__=b.prototype;return a};window.invertColorSound=new Audio("sounds/invertColor.wav");v=function(a){function b(d,c,f,k,l,h,e){var g,b,a,m,q,n,r,s;this.stars=[];this.type=d;this.speed=f;this.direction=k;this.color=l;this.starCount=h;this.layers=e;this.layered=!1;if(1>f)throw Error("Speed must be at least 1");if("undefined"===
typeof k||"UP"!==k&&"DOWN"!==k&&"LEFT"!==k&&"RIGHT"!==k)throw Error("Specify a direction from ['UP', 'DOWN', 'LEFT', 'RIGHT']");if("CIRCLE"!==d)throw console.log("enter one of these as first argument: ['CIRCLE']"),Error("didn't enter a valid type of star from ['CIRCLE']");if("undefined"!==typeof e)for(this.layered=!0,m=Math.floor(h/e),q=!1,b=r=d=1;1<=e?r<=e:r>=e;b=1<=e?++r:--r)if(1===e)for(this.layered=!1,a=1;1<=m?a<=m:a>=m;1<=m?++a:--a)b=Math.floor(Math.random()*window.canvas.width+1),n=Math.floor(Math.random()*
window.canvas.height+1),this.stars.push(new p(c,b,n,f,k,l,this.stars));else{this.layered=!0;a={layerArray:[],first:!1};a.small=q;a.ratio=d;if(1===b)for(a.first=!0,g=1;1<=m?g<=m:g>=m;1<=m?++g:--g)b=Math.floor(Math.random()*window.canvas.width+1),n=Math.floor(Math.random()*window.canvas.height+1),a.layerArray.push(new p(c,b,n,f,k,l,a.layerArray));else if(b===e)if(b=this.stars.reduce(function(c,d){return c+d}),b+m<h)for(g=h-b,s=1;1<=g?s<=g:s>=g;1<=g?++s:--s)b=Math.floor(Math.random()*window.canvas.width+
1),n=Math.floor(Math.random()*window.canvas.height+1),q?a.layerArray.push(new p(c/d,b,n,f/d,k,l,a.layerArray)):a.layerArray.push(new p(c*d,b,n,f*d,k,l,a.layerArray));else for(g=1;1<=m?g<=m:g>=m;1<=m?++g:--g)b=Math.floor(Math.random()*window.canvas.width+1),n=Math.floor(Math.random()*window.canvas.height+1),q?a.layerArray.push(new p(c/d,b,n,f/d,k,l,a.layerArray)):a.layerArray.push(new p(c*d,b,n,f*d,k,l,a.layerArray));else for(g=1;1<=m?g<=m:g>=m;1<=m?++g:--g)b=Math.floor(Math.random()*window.canvas.width+
1),n=Math.floor(Math.random()*window.canvas.height+1),q?a.layerArray.push(new p(c/d,b,n,f/d,k,l,a.layerArray)):a.layerArray.push(new p(c*d,b,n,f*d,k,l,a.layerArray));q?q=!1:(q=!0,d*=2);this.stars.push(a)}else for(b=e=1;1<=h?e<=h:e>=h;b=1<=h?++e:--e)b=Math.floor(Math.random()*window.canvas.width+1),n=Math.floor(Math.random()*window.canvas.height+1),this.stars.push(new p(c,b,n,f,k,l,this.stars))}z(b,a);b.prototype.draw=function(){var d,c,f,k,b,a,e;if(0<this.stars.length)if(!0===this.layered)for(a=this.stars,
c=0,k=a.length;c<k;c++)for(d=a[c],e=d.layerArray,f=0,b=e.length;f<b;f++)d=e[f],d.draw();else for(a=this.stars,c=0,k=a.length;c<k;c++)d=a[c],d.draw()};b.prototype.moveStars=function(){var d,c,f,k,b,a,e;if(0<this.stars.length)if(!0===this.layered)for(a=this.stars,c=0,k=a.length;c<k;c++)for(d=a[c],e=d.layerArray,f=0,b=e.length;f<b;f++)d=e[f],d.move();else for(a=this.stars,c=0,k=a.length;c<k;c++)d=a[c],d.move()};b.prototype.setDirection=function(d){var c,f,a,b,h,e,g;this.direction=d;if(0<this.stars.length)if(!0===
this.layered)for(e=this.stars,f=0,b=e.length;f<b;f++)for(c=e[f],g=c.layerArray,a=0,h=g.length;a<h;a++)c=g[a],c.direction=d;else for(e=this.stars,f=0,b=e.length;f<b;f++)c=e[f],c.direction=d};b.prototype.freeze=function(){var d,c,f,a,b,h,e;if(0<this.stars.length)if(!0===this.layered)for(h=this.stars,c=0,a=h.length;c<a;c++)for(d=h[c],e=d.layerArray,f=0,b=e.length;f<b;f++)d=e[f],d.speed=0;else for(h=this.stars,c=0,a=h.length;c<a;c++)d=h[c],d.speed=0};b.prototype.resume=function(){this.setSpeed(this.speed);
this.setDirection(this.direction)};b.prototype.setSpeed=function(d){var c,f,a,b,h,e,g;if(0<this.stars.length)if(!0===this.layered)for(c=d,8<d?c=8:1>d&&(c=1),f=d=1,e=this.layers;1<=e?d<=e:d>=e;f=1<=e?++d:--d)if(1===f)for(h=this.stars[f-1].layerArray,f=0,b=h.length;f<b;f++)a=h[f],a.speed=c;else if(this.stars[f-1].small)for(g=this.stars[f-1].layerArray,b=0,h=g.length;b<h;b++)a=g[b],a.speed=c/this.stars[f-1].ratio;else for(g=this.stars[f-1].layerArray,b=0,h=g.length;b<h;b++)a=g[b],a.speed=c*this.stars[f-
1].ratio;else for(f=this.stars,e=0,c=f.length;e<c;e++)a=f[e],a.speed=8<d?this.speed=8:1>d?this.speed=1:this.speed=d};b.prototype.changeSpeed=function(d){var c,a,b,l,h,e,g;if(0<this.stars.length)if(!0===this.layered)for(c=b=1,e=this.layers;1<=e?b<=e:b>=e;c=1<=e?++b:--b)if(1===c)for(this.speed=1>=this.speed+d?1:8<=this.speed+d?8:this.speed+d,h=this.stars[0].layerArray,c=0,l=h.length;c<l;c++)a=h[c],a.speed=this.speed;else if(this.stars[c-1].small)for(g=this.stars[c-1].layerArray,l=0,h=g.length;l<h;l++)a=
g[l],a.speed=1>=this.speed?1/this.stars[c-1].ratio:8<=this.speed?8/this.stars[c-1].ratio:a.speed+d/this.stars[c-1].ratio;else for(g=this.stars[c-1].layerArray,l=0,h=g.length;l<h;l++)a=g[l],a.speed=1>=this.speed?1*this.stars[c-1].ratio:8<=this.speed?8*this.stars[c-1].ratio:a.speed+d*this.stars[c-1].ratio;else for(c=this.stars,e=0,b=c.length;e<b;e++)a=c[e],a.speed+=d,this.speed+=d,1>a.speed?a.speed=this.speed=1:8<a.speed&&(a.speed=this.speed=8)};b.prototype.setColor=function(a){var c,b,k,l,h,e,g;this.color=
a;if(0<this.stars.length)if(this.layered)for(e=this.stars,b=0,l=e.length;b<l;b++)for(c=e[b],g=c.layerArray,k=0,h=g.length;k<h;k++)c=g[k],c.color=a;else for(e=this.stars,b=0,l=e.length;b<l;b++)c=e[b],c.color=a};b.prototype.setBg=function(a){window.canvas.style.backgroundColor=a};b.prototype.clear=function(){var a,b,f,k,l;if(this.layered)for(a=b=a,l=this.layers;a<=l?b<=l:b>=l;a=a<=l?++b:--b)for(k=this.stars,f=0,k=k.length;f<k;f++);else this.stars=[]};return b}(function(){function a(){}a._instance=null;
a.getInstance=function(){return this._instance||(this._instance=function(a,d,c){c.prototype=a.prototype;c=new c;a=a.apply(c,d);return Object(a)===a?a:c}(this,arguments,function(){}))};return a}());p=function(){function a(a,d,c,f,k,l,h){this.radius=a;this.centerX=d;this.centerY=c;this.speed=f;this.direction=k;this.color=l;this.destroyed=!1;this.parentArray=h}a.prototype.draw=function(){window.ctx.fillStyle=this.color;window.ctx.strokeStyle=this.color;window.ctx.beginPath();window.ctx.arc(this.centerX,
this.centerY,this.radius,0,2*Math.PI,!1);window.ctx.fill();window.ctx.stroke();if(this.destroyed)return this.destroy()};a.prototype.move=function(){"LEFT"===this.direction?this.centerX-=this.speed:"RIGHT"===this.direction?this.centerX+=this.speed:"UP"===this.direction?this.centerY-=this.speed:"DOWN"===this.direction&&(this.centerY+=this.speed);if(0>this.centerX||this.centerX>window.canvas.width||0>this.centerY||this.centerY>window.canvas.height)return this.destroyed=!0};a.prototype.destroy=function(){var b,
d;d=b=0;"LEFT"===this.direction?(b=window.canvas.width,d=Math.floor(Math.random()*window.canvas.height+1)):"RIGHT"===this.direction?d=Math.floor(Math.random()*window.canvas.height+1):"UP"===this.direction?(b=Math.floor(Math.random()*window.canvas.width+1),d=window.canvas.height):"DOWN"===this.direction&&(b=Math.floor(Math.random()*window.canvas.width+1));this.parentArray.push(new a(this.radius,b,d,this.speed,this.direction,this.color,this.parentArray));b=this.parentArray.indexOf(this);return this.parentArray.splice(b,
1)};return a}();t=jQuery;t("#game").click(function(a){});u=!0;t("#game").attr("tabindex","0").keydown(function(a){console.log(a.keyCode);87===a.keyCode&&window.starField.setDirection("UP");83===a.keyCode&&window.starField.setDirection("DOWN");65===a.keyCode&&window.starField.setDirection("LEFT");68===a.keyCode&&window.starField.setDirection("RIGHT");81===a.keyCode&&window.starField.freeze();69===a.keyCode&&window.starField.resume();73===a.keyCode&&(u?(window.starField.setColor("#000000"),window.starField.setBg("#ffffff"),
u=!1):(window.starField.setColor("#ffffff"),window.starField.setBg("#000000"),u=!0),window.invertColorSound.play(),window.invertColorSound=new Audio("sounds/invertColor.wav"));74===a.keyCode&&window.starField.changeSpeed(-1);if(75===a.keyCode)return window.starField.changeSpeed(1)});t("#gamebox").mousemove(function(a){});window.canvas=document.getElementById("game");window.rect=window.canvas.getBoundingClientRect();window.canvas.width=window.canvas.height=570;window.ctx=window.canvas.getContext("2d");
window.starField=v.getInstance("CIRCLE",1,1,"UP","#ffffff",100,4);x=function(){window.starField.moveStars()};w=function(){window.ctx.clearRect(0,0,window.canvas.width,window.canvas.height);window.starField.draw()};setInterval(function(){x();w()},10)}).call(this);
