(function(){var t,p,u,v,w,x={}.hasOwnProperty,y=function(a,b){function d(){this.constructor=a}for(var c in b)x.call(b,c)&&(a[c]=b[c]);d.prototype=b.prototype;a.prototype=new d;a.__super__=b.prototype;return a};u=function(a){function b(d,c,l,h,g,e,f){var k,b,a,m,q,n,r,s;this.stars=[];this.type=d;this.speed=l;this.direction=h;this.color=g;this.starCount=e;this.layers=f;this.layered=!1;if(1>l)throw Error("Speed must be at least 1");if("undefined"===typeof h||"UP"!==h&&"DOWN"!==h&&"LEFT"!==h&&"RIGHT"!==
h)throw Error("Specify a direction from ['UP', 'DOWN', 'LEFT', 'RIGHT']");if("CIRCLE"!==d)throw console.log("enter one of these as first argument: ['CIRCLE']"),Error("didn't enter a valid type of star from ['CIRCLE']");if("undefined"!==typeof f)for(this.layered=!0,m=Math.floor(e/f),q=!1,b=r=d=1;1<=f?r<=f:r>=f;b=1<=f?++r:--r)if(1===f)for(this.layered=!1,a=1;1<=m?a<=m:a>=m;1<=m?++a:--a)b=Math.floor(Math.random()*window.canvas.width+1),n=Math.floor(Math.random()*window.canvas.height+1),this.stars.push(new p(c,
b,n,l,h,g,this.stars));else{this.layered=!0;a={layerArray:[],first:!1};a.small=q;a.ratio=d;if(1===b)for(a.first=!0,k=1;1<=m?k<=m:k>=m;1<=m?++k:--k)b=Math.floor(Math.random()*window.canvas.width+1),n=Math.floor(Math.random()*window.canvas.height+1),a.layerArray.push(new p(c,b,n,l,h,g,a.layerArray));else if(b===f)if(b=this.stars.reduce(function(c,d){return c+d}),b+m<e)for(k=e-b,s=1;1<=k?s<=k:s>=k;1<=k?++s:--s)b=Math.floor(Math.random()*window.canvas.width+1),n=Math.floor(Math.random()*window.canvas.height+
1),q?a.layerArray.push(new p(c/d,b,n,l/d,h,g,a.layerArray)):a.layerArray.push(new p(c*d,b,n,l*d,h,g,a.layerArray));else for(k=1;1<=m?k<=m:k>=m;1<=m?++k:--k)b=Math.floor(Math.random()*window.canvas.width+1),n=Math.floor(Math.random()*window.canvas.height+1),q?a.layerArray.push(new p(c/d,b,n,l/d,h,g,a.layerArray)):a.layerArray.push(new p(c*d,b,n,l*d,h,g,a.layerArray));else for(k=1;1<=m?k<=m:k>=m;1<=m?++k:--k)b=Math.floor(Math.random()*window.canvas.width+1),n=Math.floor(Math.random()*window.canvas.height+
1),q?a.layerArray.push(new p(c/d,b,n,l/d,h,g,a.layerArray)):a.layerArray.push(new p(c*d,b,n,l*d,h,g,a.layerArray));q?q=!1:(q=!0,d*=2);this.stars.push(a)}else for(b=f=1;1<=e?f<=e:f>=e;b=1<=e?++f:--f)b=Math.floor(Math.random()*window.canvas.width+1),n=Math.floor(Math.random()*window.canvas.height+1),this.stars.push(new p(c,b,n,l,h,g,this.stars))}y(b,a);b.prototype.draw=function(){var d,c,l,b,a,e,f;if(!0===this.layered)for(e=this.stars,c=0,b=e.length;c<b;c++)for(d=e[c],f=d.layerArray,l=0,a=f.length;l<
a;l++)d=f[l],d.draw();else if(0<this.stars.length)for(e=this.stars,c=0,b=e.length;c<b;c++)d=e[c],d.draw()};b.prototype.moveStars=function(){var d,c,l,b,a,e,f;if(!0===this.layered)for(e=this.stars,c=0,b=e.length;c<b;c++)for(d=e[c],f=d.layerArray,l=0,a=f.length;l<a;l++)d=f[l],d.move();else if(0<this.stars.length)for(e=this.stars,c=0,b=e.length;c<b;c++)d=e[c],d.move()};b.prototype.setDirection=function(d){var c,l,b,a,e,f,k;if(!0===this.layered)for(f=this.stars,l=0,a=f.length;l<a;l++)for(c=f[l],k=c.layerArray,
b=0,e=k.length;b<e;b++)c=k[b],c.direction=this.direction=d;else if(0<this.stars.length)for(f=this.stars,l=0,a=f.length;l<a;l++)c=f[l],c.direction=this.direction=d};b.prototype.freeze=function(){var d,c,b,a,g,e,f;if(!0===this.layered)for(e=this.stars,c=0,a=e.length;c<a;c++)for(d=e[c],f=d.layerArray,b=0,g=f.length;b<g;b++)d=f[b],d.speed=0;else if(0<this.stars.length)for(e=this.stars,c=0,a=e.length;c<a;c++)d=e[c],d.speed=0};b.prototype.resume=function(){this.setSpeed(this.speed);this.setDirection(this.direction)};
b.prototype.setSpeed=function(b){var c,a,h,g,e,f,k;if(!0===this.layered)for(c=b,8<b?c=8:1>b&&(c=1),a=b=1,f=this.layers;1<=f?b<=f:b>=f;a=1<=f?++b:--b)if(1===a)for(e=this.stars[a-1].layerArray,a=0,g=e.length;a<g;a++)h=e[a],h.speed=c;else if(this.stars[a-1].small)for(k=this.stars[a-1].layerArray,g=0,e=k.length;g<e;g++)h=k[g],h.speed=c/this.stars[a-1].ratio;else for(k=this.stars[a-1].layerArray,g=0,e=k.length;g<e;g++)h=k[g],h.speed=c*this.stars[a-1].ratio;else if(0<this.stars.length)for(a=this.stars,
f=0,c=a.length;f<c;f++)h=a[f],h.speed=8<b?this.speed=8:1>b?this.speed=1:this.speed=b};b.prototype.changeSpeed=function(b){var c,a,h,g,e,f,k;if(!0===this.layered)for(c=h=1,f=this.layers;1<=f?h<=f:h>=f;c=1<=f?++h:--h)if(1===c)for(this.speed=1>=this.speed+b?1:8<=this.speed+b?8:this.speed+b,e=this.stars[0].layerArray,c=0,g=e.length;c<g;c++)a=e[c],a.speed=this.speed;else if(this.stars[c-1].small)for(k=this.stars[c-1].layerArray,g=0,e=k.length;g<e;g++)a=k[g],a.speed=1>=this.speed?1/this.stars[c-1].ratio:
8<=this.speed?8/this.stars[c-1].ratio:a.speed+b/this.stars[c-1].ratio;else for(k=this.stars[c-1].layerArray,g=0,e=k.length;g<e;g++)a=k[g],a.speed=1>=this.speed?1*this.stars[c-1].ratio:8<=this.speed?8*this.stars[c-1].ratio:a.speed+b*this.stars[c-1].ratio;else if(0<this.stars.length)for(c=this.stars,f=0,h=c.length;f<h;f++)a=c[f],a.speed+=b,this.speed+=b,1>a.speed?a.speed=this.speed=1:8<a.speed&&(a.speed=this.speed=8)};b.prototype.setColor=function(a,b){var l,h,g,e;if(!a&&0<this.stars.length)for(e=this.stars,
h=0,g=e.length;h<g;h++)l=e[h],l.color=this.color=b};b.prototype.destroy=function(){this.stars=[]};return b}(function(){function a(){}a._instance=null;a.getInstance=function(){return this._instance||(this._instance=function(a,d,c){c.prototype=a.prototype;c=new c;a=a.apply(c,d);return Object(a)===a?a:c}(this,arguments,function(){}))};return a}());p=function(){function a(a,d,c,l,h,g,e){this.radius=a;this.centerX=d;this.centerY=c;this.speed=l;this.direction=h;this.color=g;this.destroyed=!1;this.parentArray=
e}a.prototype.draw=function(){window.ctx.fillStyle=this.color;window.ctx.strokeStyle=this.color;window.ctx.beginPath();window.ctx.arc(this.centerX,this.centerY,this.radius,0,2*Math.PI,!1);window.ctx.fill();window.ctx.stroke();if(this.destroyed)return this.destroy()};a.prototype.move=function(){"LEFT"===this.direction?this.centerX-=this.speed:"RIGHT"===this.direction?this.centerX+=this.speed:"UP"===this.direction?this.centerY-=this.speed:"DOWN"===this.direction&&(this.centerY+=this.speed);if(0>this.centerX||
this.centerX>window.canvas.width||0>this.centerY||this.centerY>window.canvas.height)return this.destroyed=!0};a.prototype.destroy=function(){var b,d;d=b=0;"LEFT"===this.direction?(b=window.canvas.width,d=Math.floor(Math.random()*window.canvas.height+1)):"RIGHT"===this.direction?d=Math.floor(Math.random()*window.canvas.height+1):"UP"===this.direction?(b=Math.floor(Math.random()*window.canvas.width+1),d=window.canvas.height):"DOWN"===this.direction&&(b=Math.floor(Math.random()*window.canvas.width+1));
this.parentArray.push(new a(this.radius,b,d,this.speed,this.direction,this.color,this.parentArray));b=this.parentArray.indexOf(this);return this.parentArray.splice(b,1)};return a}();t=jQuery;t("#game").click(function(a){});t("#game").attr("tabindex","0").keydown(function(a){console.log(a.keyCode);87===a.keyCode&&window.starField.setDirection("UP");83===a.keyCode&&window.starField.setDirection("DOWN");65===a.keyCode&&window.starField.setDirection("LEFT");68===a.keyCode&&window.starField.setDirection("RIGHT");
81===a.keyCode&&window.starField.freeze();69===a.keyCode&&window.starField.resume();74===a.keyCode&&window.starField.changeSpeed(-1);if(75===a.keyCode)return window.starField.changeSpeed(1)});t("#gamebox").mousemove(function(a){});window.canvas=document.getElementById("game");window.rect=window.canvas.getBoundingClientRect();window.canvas.width=window.canvas.height=570;window.ctx=window.canvas.getContext("2d");window.starField=u.getInstance("CIRCLE",1,1,"UP","#ffffff",100,4);w=function(){window.starField.moveStars()};
v=function(){window.ctx.clearRect(0,0,window.canvas.width,window.canvas.height);window.starField.draw()};setInterval(function(){w();v()},10)}).call(this);
