(function(){var t,p,u,v,w,x={}.hasOwnProperty,y=function(b,a){function g(){this.constructor=b}for(var c in a)x.call(a,c)&&(b[c]=a[c]);g.prototype=a.prototype;b.prototype=new g;b.__super__=a.prototype;return b};u=function(b){function a(g,c,d,m,k,e,f){var h,a,b,l,q,n,r,s;this.stars=[];this.type=g;this.speed=d;this.direction=m;this.color=k;this.starCount=e;this.layers=f;this.layered=!1;if(1>d)throw Error("Speed must be at least 1");if("undefined"===typeof m||"UP"!==m&&"DOWN"!==m&&"LEFT"!==m&&"RIGHT"!==
m)throw Error("Specify a direction from ['UP', 'DOWN', 'LEFT', 'RIGHT']");if("CIRCLE"!==g)throw console.log("enter one of these as first argument: ['CIRCLE']"),Error("didn't enter a valid type of star from ['CIRCLE']");if("undefined"!==typeof f)for(this.layered=!0,l=Math.floor(e/f),q=!1,a=r=g=1;1<=f?r<=f:r>=f;a=1<=f?++r:--r)if(1===f)for(this.layered=!1,b=1;1<=l?b<=l:b>=l;1<=l?++b:--b)a=Math.floor(Math.random()*window.canvas.width+1),n=Math.floor(Math.random()*window.canvas.height+1),this.stars.push(new p(c,
a,n,d,m,k,this.stars));else{this.layered=!0;b={layerArray:[],first:!1};b.small=q;b.ratio=g;if(1===a)for(b.first=!0,h=1;1<=l?h<=l:h>=l;1<=l?++h:--h)a=Math.floor(Math.random()*window.canvas.width+1),n=Math.floor(Math.random()*window.canvas.height+1),b.layerArray.push(new p(c,a,n,d,m,k,b.layerArray));else if(a===f)if(a=this.stars.reduce(function(c,d){return c+d}),a+l<e)for(h=e-a,s=1;1<=h?s<=h:s>=h;1<=h?++s:--s)a=Math.floor(Math.random()*window.canvas.width+1),n=Math.floor(Math.random()*window.canvas.height+
1),q?b.layerArray.push(new p(c/g,a,n,d/g,m,k,b.layerArray)):b.layerArray.push(new p(c*g,a,n,d*g,m,k,b.layerArray));else for(h=1;1<=l?h<=l:h>=l;1<=l?++h:--h)a=Math.floor(Math.random()*window.canvas.width+1),n=Math.floor(Math.random()*window.canvas.height+1),q?b.layerArray.push(new p(c/g,a,n,d/g,m,k,b.layerArray)):b.layerArray.push(new p(c*g,a,n,d*g,m,k,b.layerArray));else for(h=1;1<=l?h<=l:h>=l;1<=l?++h:--h)a=Math.floor(Math.random()*window.canvas.width+1),n=Math.floor(Math.random()*window.canvas.height+
1),q?b.layerArray.push(new p(c/g,a,n,d/g,m,k,b.layerArray)):b.layerArray.push(new p(c*g,a,n,d*g,m,k,b.layerArray));q?q=!1:(q=!0,g*=2);this.stars.push(b)}else for(a=f=1;1<=e?f<=e:f>=e;a=1<=e?++f:--f)a=Math.floor(Math.random()*window.canvas.width+1),n=Math.floor(Math.random()*window.canvas.height+1),this.stars.push(new p(c,a,n,d,m,k,this.stars))}y(a,b);a.prototype.draw=function(){var g,c,d,a,b,e,f;if(!0===this.layered)for(e=this.stars,c=0,a=e.length;c<a;c++)for(g=e[c],f=g.layerArray,d=0,b=f.length;d<
b;d++)g=f[d],g.draw();else if(0<this.stars.length)for(e=this.stars,c=0,a=e.length;c<a;c++)g=e[c],g.draw()};a.prototype.moveStars=function(){var g,c,d,a,b,e,f;if(!0===this.layered)for(e=this.stars,c=0,a=e.length;c<a;c++)for(g=e[c],f=g.layerArray,d=0,b=f.length;d<b;d++)g=f[d],g.move();else if(0<this.stars.length)for(e=this.stars,c=0,a=e.length;c<a;c++)g=e[c],g.move()};a.prototype.setDirection=function(g){var c,d,a,b,e,f,h;if(!0===this.layered)for(f=this.stars,d=0,b=f.length;d<b;d++)for(c=f[d],h=c.layerArray,
a=0,e=h.length;a<e;a++)c=h[a],c.direction=this.direction=g;else if(0<this.stars.length)for(f=this.stars,d=0,b=f.length;d<b;d++)c=f[d],c.direction=this.direction=g};a.prototype.freeze=function(){var g,c,d,a,b,e,f;if(!0===this.layered)for(e=this.stars,c=0,a=e.length;c<a;c++)for(g=e[c],f=g.layerArray,d=0,b=f.length;d<b;d++)g=f[d],g.speed=0;else if(0<this.stars.length)for(e=this.stars,c=0,a=e.length;c<a;c++)g=e[c],g.speed=0};a.prototype.resume=function(){this.setSpeed(this.speed);this.setDirection(this.direction)};
a.prototype.setSpeed=function(a){var c,d,b,k,e,f,h;if(!0===this.layered)for(c=a,8<a?c=8:1>a&&(c=1),d=a=1,f=this.layers;1<=f?a<=f:a>=f;d=1<=f?++a:--a)if(1===d)for(e=this.stars[d-1].layerArray,d=0,k=e.length;d<k;d++)b=e[d],b.speed=c;else if(this.stars[d-1].small)for(h=this.stars[d-1].layerArray,k=0,e=h.length;k<e;k++)b=h[k],b.speed=c/this.stars[d-1].ratio;else for(h=this.stars[d-1].layerArray,k=0,e=h.length;k<e;k++)b=h[k],b.speed=c*this.stars[d-1].ratio;else if(0<this.stars.length)for(d=this.stars,
f=0,c=d.length;f<c;f++)b=d[f],b.speed=8<a?this.speed=8:1>a?this.speed=1:this.speed=a};a.prototype.changeSpeed=function(a){var c,d,b,k,e,f,h;if(!0===this.layered)for(c=b=1,f=this.layers;1<=f?b<=f:b>=f;c=1<=f?++b:--b)if(1===c)for(e=this.stars[c-1].layerArray,c=0,k=e.length;c<k;c++)d=e[c],d.speed+=a,this.speed+=a,1>d.speed?d.speed=this.speed=1:8<d.speed&&(d.speed=this.speed=8);else if(this.stars[c-1].small)for(h=this.stars[c-1].layerArray,k=0,e=h.length;k<e;k++)d=h[k],d.speed+=a/this.stars[c-1].ratio,
this.speed+=a,1>this.speed?(this.speed=1,d.speed=1/this.stars[c-1].ratio):8<d.speed&&(this.speed=8,d.speed=8/this.stars[c-1].ratio);else for(h=this.stars[c-1].layerArray,k=0,e=h.length;k<e;k++)d=h[k],d.speed+=a*this.stars[c-1].ratio,this.speed+=a,1>this.speed?(this.speed=1,d.speed=1*this.stars[c-1].ratio):8<d.speed&&(this.speed=8,d.speed=8*this.stars[c-1].ratio);else if(0<this.stars.length)for(c=this.stars,f=0,b=c.length;f<b;f++)d=c[f],d.speed+=a,this.speed+=a,1>d.speed?d.speed=this.speed=1:8<d.speed&&
(d.speed=this.speed=8)};a.prototype.setColor=function(a,c){var d,b,k,e;if(!a&&0<this.stars.length)for(e=this.stars,b=0,k=e.length;b<k;b++)d=e[b],d.color=this.color=c};a.prototype.destroy=function(){this.stars=[]};return a}(function(){function b(){}b._instance=null;b.getInstance=function(){return this._instance||(this._instance=function(a,b,c){c.prototype=a.prototype;c=new c;a=a.apply(c,b);return Object(a)===a?a:c}(this,arguments,function(){}))};return b}());p=function(){function b(a,b,c,d,m,k,e){this.radius=
a;this.centerX=b;this.centerY=c;this.speed=d;this.direction=m;this.color=k;this.destroyed=!1;this.parentArray=e}b.prototype.draw=function(){window.ctx.fillStyle=this.color;window.ctx.strokeStyle=this.color;window.ctx.beginPath();window.ctx.arc(this.centerX,this.centerY,this.radius,0,2*Math.PI,!1);window.ctx.fill();window.ctx.stroke();if(this.destroyed)return this.destroy()};b.prototype.move=function(){"LEFT"===this.direction?this.centerX-=this.speed:"RIGHT"===this.direction?this.centerX+=this.speed:
"UP"===this.direction?this.centerY-=this.speed:"DOWN"===this.direction&&(this.centerY+=this.speed);if(0>this.centerX||this.centerX>window.canvas.width||0>this.centerY||this.centerY>window.canvas.height)return this.destroyed=!0};b.prototype.destroy=function(){var a,g;g=a=0;"LEFT"===this.direction?(a=window.canvas.width,g=Math.floor(Math.random()*window.canvas.height+1)):"RIGHT"===this.direction?g=Math.floor(Math.random()*window.canvas.height+1):"UP"===this.direction?(a=Math.floor(Math.random()*window.canvas.width+
1),g=window.canvas.height):"DOWN"===this.direction&&(a=Math.floor(Math.random()*window.canvas.width+1));this.parentArray.push(new b(this.radius,a,g,this.speed,this.direction,this.color,this.parentArray));a=this.parentArray.indexOf(this);return this.parentArray.splice(a,1)};return b}();t=jQuery;t("#game").click(function(b){});t("#game").attr("tabindex","0").keydown(function(b){console.log(b.keyCode);87===b.keyCode&&window.starField.setDirection("UP");83===b.keyCode&&window.starField.setDirection("DOWN");
65===b.keyCode&&window.starField.setDirection("LEFT");68===b.keyCode&&window.starField.setDirection("RIGHT");81===b.keyCode&&window.starField.freeze();69===b.keyCode&&window.starField.resume();74===b.keyCode&&window.starField.changeSpeed(-1);if(75===b.keyCode)return window.starField.changeSpeed(1)});t("#gamebox").mousemove(function(b){});window.canvas=document.getElementById("game");window.rect=window.canvas.getBoundingClientRect();window.canvas.width=window.canvas.height=570;window.ctx=window.canvas.getContext("2d");
window.starField=u.getInstance("CIRCLE",1,1,"UP","#ffffff",100,4);w=function(){window.starField.moveStars()};v=function(){window.ctx.clearRect(0,0,window.canvas.width,window.canvas.height);window.starField.draw()};setInterval(function(){w();v()},10)}).call(this);
