(function(){var t,p,u,v,w;u=function(){function a(d,c,b,h,g,f,e){var k,a,l,m,q,n,r,s;this.stars=[];this.type=d;this.speed=b;this.direction=h;this.color=g;this.starCount=f;this.layers=e;this.layered=!1;if(1>b)throw Error("Speed must be at least 1");if("undefined"===typeof h||"UP"!==h&&"DOWN"!==h&&"LEFT"!==h&&"RIGHT"!==h)throw Error("Specify a direction from ['UP', 'DOWN', 'LEFT', 'RIGHT']");if("CIRCLE"!==d)throw console.log("enter one of these as first argument: ['CIRCLE']"),Error("didn't enter a valid type of star from ['CIRCLE']");
if("undefined"!==typeof e)for(this.layered=!0,m=Math.floor(f/e),q=!1,a=r=d=1;1<=e?r<=e:r>=e;a=1<=e?++r:--r)if(1===e)for(this.layered=!1,l=1;1<=m?l<=m:l>=m;1<=m?++l:--l)a=Math.floor(Math.random()*window.canvas.width+1),n=Math.floor(Math.random()*window.canvas.height+1),this.stars.push(new p(c,a,n,b,h,g,this.stars));else{this.layered=!0;l={layerArray:[],first:!1};l.small=q;l.ratio=d;if(1===a)for(l.first=!0,k=1;1<=m?k<=m:k>=m;1<=m?++k:--k)a=Math.floor(Math.random()*window.canvas.width+1),n=Math.floor(Math.random()*
window.canvas.height+1),l.layerArray.push(new p(c,a,n,b,h,g,l.layerArray));else if(a===e)if(a=this.stars.reduce(function(b,c){return b+c}),a+m<f)for(k=f-a,s=1;1<=k?s<=k:s>=k;1<=k?++s:--s)a=Math.floor(Math.random()*window.canvas.width+1),n=Math.floor(Math.random()*window.canvas.height+1),q?l.layerArray.push(new p(c/d,a,n,b/d,h,g,l.layerArray)):l.layerArray.push(new p(c*d,a,n,b*d,h,g,l.layerArray));else for(k=1;1<=m?k<=m:k>=m;1<=m?++k:--k)a=Math.floor(Math.random()*window.canvas.width+1),n=Math.floor(Math.random()*
window.canvas.height+1),q?l.layerArray.push(new p(c/d,a,n,b/d,h,g,l.layerArray)):l.layerArray.push(new p(c*d,a,n,b*d,h,g,l.layerArray));else for(k=1;1<=m?k<=m:k>=m;1<=m?++k:--k)a=Math.floor(Math.random()*window.canvas.width+1),n=Math.floor(Math.random()*window.canvas.height+1),q?l.layerArray.push(new p(c/d,a,n,b/d,h,g,l.layerArray)):l.layerArray.push(new p(c*d,a,n,b*d,h,g,l.layerArray));q?q=!1:(q=!0,d*=2);this.stars.push(l)}else for(a=e=1;1<=f?e<=f:e>=f;a=1<=f?++e:--e)a=Math.floor(Math.random()*window.canvas.width+
1),n=Math.floor(Math.random()*window.canvas.height+1),this.stars.push(new p(c,a,n,b,h,g,this.stars))}a.prototype.draw=function(){var d,c,b,h,a,f,e;if(!0===this.layered)for(f=this.stars,c=0,h=f.length;c<h;c++)for(d=f[c],e=d.layerArray,b=0,a=e.length;b<a;b++)d=e[b],d.draw();else if(0<this.stars.length)for(f=this.stars,c=0,h=f.length;c<h;c++)d=f[c],d.draw()};a.prototype.moveStars=function(){var d,c,b,h,a,f,e;if(!0===this.layered)for(f=this.stars,c=0,h=f.length;c<h;c++)for(d=f[c],e=d.layerArray,b=0,a=
e.length;b<a;b++)d=e[b],d.move();else if(0<this.stars.length)for(f=this.stars,c=0,h=f.length;c<h;c++)d=f[c],d.move()};a.prototype.setDirection=function(d){var c,b,a,g,f,e,k;if(!0===this.layered)for(e=this.stars,b=0,g=e.length;b<g;b++)for(c=e[b],k=c.layerArray,a=0,f=k.length;a<f;a++)c=k[a],c.direction=this.direction=d;else if(0<this.stars.length)for(e=this.stars,b=0,g=e.length;b<g;b++)c=e[b],c.direction=this.direction=d};a.prototype.freeze=function(){var d,c,b,a,g,f,e;if(!0===this.layered)for(f=this.stars,
c=0,a=f.length;c<a;c++)for(d=f[c],e=d.layerArray,b=0,g=e.length;b<g;b++)d=e[b],d.speed=0;else if(0<this.stars.length)for(f=this.stars,c=0,a=f.length;c<a;c++)d=f[c],d.speed=0};a.prototype.resume=function(){this.setSpeed(this.speed);this.setDirection(this.direction)};a.prototype.setSpeed=function(d){var c,b,a,g,f,e,k;if(!0===this.layered)for(c=d,8<d?c=8:1>d&&(c=1),b=d=1,e=this.layers;1<=e?d<=e:d>=e;b=1<=e?++d:--d)if(1===b)for(f=this.stars[b-1].layerArray,b=0,g=f.length;b<g;b++)a=f[b],a.speed=c;else if(this.stars[b-
1].small)for(k=this.stars[b-1].layerArray,g=0,f=k.length;g<f;g++)a=k[g],a.speed=c/this.stars[b-1].ratio;else for(k=this.stars[b-1].layerArray,g=0,f=k.length;g<f;g++)a=k[g],a.speed=c*this.stars[b-1].ratio;else if(0<this.stars.length)for(b=this.stars,e=0,c=b.length;e<c;e++)a=b[e],a.speed=8<d?this.speed=8:1>d?this.speed=1:this.speed=d};a.prototype.changeSpeed=function(a){var c,b,h,g,f,e,k;if(!0===this.layered)for(c=h=1,e=this.layers;1<=e?h<=e:h>=e;c=1<=e?++h:--h)if(1===c)for(f=this.stars[c-1].layerArray,
c=0,g=f.length;c<g;c++)b=f[c],b.speed+=a,this.speed+=a,1>b.speed?b.speed=this.speed=1:8<b.speed&&(b.speed=this.speed=8);else if(this.stars[c-1].small)for(k=this.stars[c-1].layerArray,g=0,f=k.length;g<f;g++)b=k[g],b.speed+=a/this.stars[c-1].ratio,this.speed+=a,1>this.speed?(this.speed=1,b.speed=1/this.stars[c-1].ratio):8<b.speed&&(this.speed=8,b.speed=8/this.stars[c-1].ratio);else for(k=this.stars[c-1].layerArray,g=0,f=k.length;g<f;g++)b=k[g],b.speed+=a*this.stars[c-1].ratio,this.speed+=a,1>this.speed?
(this.speed=1,b.speed=1*this.stars[c-1].ratio):8<b.speed&&(this.speed=8,b.speed=8*this.stars[c-1].ratio);else if(0<this.stars.length)for(c=this.stars,e=0,h=c.length;e<h;e++)b=c[e],b.speed+=a,this.speed+=a,1>b.speed?b.speed=this.speed=1:8<b.speed&&(b.speed=this.speed=8)};a.prototype.setColor=function(a,c){var b,h,g,f;if(!a&&0<this.stars.length)for(f=this.stars,h=0,g=f.length;h<g;h++)b=f[h],b.color=this.color=c};a.prototype.destroy=function(){this.stars=[]};return a}();p=function(){function a(a,c,b,
h,g,f,e){this.radius=a;this.centerX=c;this.centerY=b;this.speed=h;this.direction=g;this.color=f;this.destroyed=!1;this.parentArray=e}a.prototype.draw=function(){window.ctx.fillStyle=this.color;window.ctx.strokeStyle=this.color;window.ctx.beginPath();window.ctx.arc(this.centerX,this.centerY,this.radius,0,2*Math.PI,!1);window.ctx.fill();window.ctx.stroke();if(this.destroyed)return this.destroy()};a.prototype.move=function(){"LEFT"===this.direction?this.centerX-=this.speed:"RIGHT"===this.direction?this.centerX+=
this.speed:"UP"===this.direction?this.centerY-=this.speed:"DOWN"===this.direction&&(this.centerY+=this.speed);if(0>this.centerX||this.centerX>window.canvas.width||0>this.centerY||this.centerY>window.canvas.height)return this.destroyed=!0};a.prototype.destroy=function(){var d,c;c=d=0;"LEFT"===this.direction?(d=window.canvas.width,c=Math.floor(Math.random()*window.canvas.height+1)):"RIGHT"===this.direction?c=Math.floor(Math.random()*window.canvas.height+1):"UP"===this.direction?(d=Math.floor(Math.random()*
window.canvas.width+1),c=window.canvas.height):"DOWN"===this.direction&&(d=Math.floor(Math.random()*window.canvas.width+1));this.parentArray.push(new a(this.radius,d,c,this.speed,this.direction,this.color,this.parentArray));d=this.parentArray.indexOf(this);return this.parentArray.splice(d,1)};return a}();t=jQuery;t("#game").click(function(a){});t("#game").attr("tabindex","0").keydown(function(a){console.log(a.keyCode);87===a.keyCode&&window.starField.setDirection("UP");83===a.keyCode&&window.starField.setDirection("DOWN");
65===a.keyCode&&window.starField.setDirection("LEFT");68===a.keyCode&&window.starField.setDirection("RIGHT");81===a.keyCode&&window.starField.freeze();69===a.keyCode&&window.starField.resume();74===a.keyCode&&window.starField.changeSpeed(-1);if(75===a.keyCode)return window.starField.changeSpeed(1)});t("#gamebox").mousemove(function(a){});window.canvas=document.getElementById("game");window.rect=window.canvas.getBoundingClientRect();window.canvas.width=window.canvas.height=570;window.ctx=window.canvas.getContext("2d");
window.starField=new u("CIRCLE",1,1,"UP","#ffffff",100,4);w=function(){window.starField.moveStars()};v=function(){window.ctx.clearRect(0,0,window.canvas.width,window.canvas.height);window.starField.draw()};setInterval(function(){w();v()},10)}).call(this);
